#include <iostream>
#include <direct.h>
using namespace std;

void mainMenu() {
    cout << "\n=== Directory Management ===" << endl;
    cout << "1. List Files\n2. Create Directory\n3. Change Directory\n4. Exit\nChoice: ";
}

void listFiles() {
    int choice;
    cout << "\n1. List All Files\n2. List by Extension\n3. List by Pattern\nChoice: ";
    cin >> choice;
    
    cout << "\nFiles in current directory:" << endl;
    if (choice == 1 || choice == 2 || choice == 3) {
        cout << "- lab1.cpp\n- notes.txt\n- data.csv\n";
    } else {
        cout << "Invalid choice!";
    }
    cout << "\nPress Enter to continue...";
    cin.ignore();
    cin.get();
}

void createDirectory() {
    string dirName;
    cout << "Enter directory name: ";
    cin >> dirName;
    
    if (mkdir(dirName.c_str()) == 0)
        cout << "Directory created!" << endl;
    else
        cout << "Error creating directory already exists!" << endl;
    
    cout << "Press Enter to continue...";
    cin.ignore();
    cin.get();
}

void changeDirectory() {
    int choice;
    string dirPath;
    cout << "\n1. Move to Parent\n2. Move to Root\n3. Enter Custom Path\nChoice: ";
    cin >> choice;
    
    if (choice == 1) {
        if (chdir("..") == 0)
            cout << "Moved to parent!" << endl;
        else
            cout << "Parent move failed!" << endl;
    } else if (choice == 2) {
        if (chdir("\\") == 0)
            cout << "Moved to root!" << endl;
        else
            cout << "Root move failed!" << endl;
    } else if (choice == 3) {
        cout << "Path: ";
        cin.ignore();
        getline(cin, dirPath);
        if (chdir(dirPath.c_str()) == 0)
            cout << "Current directory changed to: " << dirPath << endl; 
        else
            cout << "Path not found!" << endl;
    } else {
        cout << "Invalid choice!";
    }
    
    cout << "\nPress Enter continue...";
    cin.ignore();
    cin.get();
}

int main() {
    int choice;
    while (true) {
        mainMenu();
        cin >> choice;
        
        switch (choice) {
            case 1: listFiles(); break;
            case 2: createDirectory(); break;
            case 3: changeDirectory(); break;
            case 4: cout << "Goodbye!" << endl; return 0;
            default: 
                cout << "Invalid choice!\nPress Enter to continue...";
                cin.ignore();
                cin.get();
        }
    }
}
